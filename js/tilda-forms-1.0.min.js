!function($){window.tildaBrowserLang=window.navigator.userLanguage||window.navigator.language,window.tildaBrowserLang=window.tildaBrowserLang.toUpperCase(),-1!=window.tildaBrowserLang.indexOf("RU")?window.tildaBrowserLang="RU":window.tildaBrowserLang="EN",window.tildaForm={isRecaptchaScriptInit:!1,currentFormProccessing:!1,arMessages:{EN:{success:"Спасибо! Данные успешно отправлены."},RU:{success:"Thank you! Your data has been submitted."}},arValidateErrors:{EN:{email:"Please put a correct e-mail",url:"Please put a correct URL",phone:"Please put a correct phone number",number:"Please put a correct number",date:"Please put a correct date",time:"Please put a correct time (HH:mm)",name:"Please put a name",namerus:"Please put a correct name (only cyrillic letters)",nameeng:"Please put a correct name (only latin letters)",string:"You put incorrect symbols. Only letters, numbers and punctuation symbols are allowed",req:"Please fill out all required fields",reqfield:"Required field",emptyfill:"No one field is filled"},RU:{email:"Укажите, пожалуйста, корректный email",url:"Укажите, пожалуйста, корректный URL",phone:"Укажите, пожалуйста, корректный номер телефона",number:"Укажите, пожалуйста, корректный номер",date:"Укажите, пожалуйста, корректную дату",time:"Укажите, пожалуйста, корректное время (ЧЧ:ММ)",name:"Укажите, пожалуйста, имя",namerus:"Укажите, пожалуйста, имя (только кириллица)",nameeng:"Укажите, пожалуйста, имя (только латиница)",string:"Вы написали некорректные символы. Разрешены только буквы, числа и знаки пунктуации",req:"Пожалуйста, заполните все обязательные поля",reqfield:"Обязательное поле",emptyfill:"Ни одно поле не заполнено"}}},$(document).ready(function(){window.tildaForm.captchaCallback=function(e){return window.tildaForm.currentFormProccessing&&window.tildaForm.currentFormProccessing.form?(window.tildaForm.send(window.tildaForm.currentFormProccessing.form,window.tildaForm.currentFormProccessing.btn,window.tildaForm.currentFormProccessing.formtype,window.tildaForm.currentFormProccessing.formskey),void(window.tildaForm.currentFormProccessing=!1)):!1},window.tildaForm.validate=function(e){var r=[],t=!0;return e.find(".js-tilda-rule").each(function(){var e,a=$(this).data("tilda-req")||0,o=$(this).data("tilda-rule")||"none",i={},s=$(this).val(),n="";if(i.obj=$(this),i.type=[],s&&s.length>0&&(n=s.replace(/\s/g,""),s=s.trim()),s.length>0&&(t=!1),1==a&&(0==s.length&&0==n.length||("checkbox"==$(this).attr("type")||"radio"==$(this).attr("type"))&&0==$(this).closest("form").find('[name="'+$(this).attr("name")+'"]:checked').length))i.type.push("req");else switch(o){case"email":e=/^[a-zA-Zёа-яЁА-Я0-9_\.\-\+]{1,64}@[a-zA-Zёа-яЁА-ЯЁёäöüÄÖÜßèéû0-9][a-zA-Zёа-яЁА-ЯЁёäöüÄÖÜßèéû0-9\.\-]{0,253}\.[a-zA-Zёа-яЁА-Я]{2,10}$/,s.length>0&&!s.match(e)&&i.type.push("email");break;case"url":e=/^((https?|ftp):\/\/)?[a-zA-Zёа-яЁА-ЯЁёäöüÄÖÜßèéû0-9][a-zA-Zёа-яЁА-ЯЁёäöüÄÖÜßèéû0-9\.\-]{0,253}\.[a-zA-Zёа-яЁА-Я]{2,10}\/?$/,s.length>0&&!s.match(e)&&i.type.push("url");break;case"phone":e=/^[0-9\(\)\-\+]+$/gi,n.length>0&&!n.match(e)&&i.type.push("phone");break;case"number":e=/^[0-9]+$/gi,n.length>0&&!n.match(e)&&i.type.push("number");break;case"date":e=/^[0-9]{1,4}[\-\.\/][0-9]{1,2}[\-\.\/][0-9]{1,4}$/gi,n.length>0&&!n.match(e)&&i.type.push("date");break;case"time":e=/^[0-9]{2}[:\.][0-9]{2}$/gi,n.length>0&&!n.match(e)&&i.type.push("time");break;case"name":e=/^([A-Za-zА-Яа-яЁёäöüÄÖÜßèéû\s]{1,}((\-)?[A-Za-zА-Яа-яЁёäöüÄÖÜßèéû\.\s](\')?){0,})*$/i,s.length>0&&!s.match(e)&&i.type.push("name");break;case"nameeng":e=/^([A-Za-z\s]{1,}((\-)?[A-Za-z\.\s](\')?){0,})*$/i,s.length>0&&!s.match(e)&&i.type.push("nameeng");break;case"namerus":e=/^([А-Яа-яЁё\s]{1,}((\-)?[А-Яа-яЁё\.\s](\')?){0,})*$/i,s.length>0&&!s.match(e)&&i.type.push("namerus");break;case"string":e=/^[A-Za-zА-Яа-яЁёЁёäöüÄÖÜßèéû0-9,\.:;\"\'\`\-\_\+\?\!\%\$\@\*\&\^\s]$/i,s.length>0&&!s.match(e)&&i.type.push("string")}i.type&&i.type.length>0&&(r[r.length]=i)}),t&&0==r.length&&(r=[{obj:"none",type:["emptyfill"]}]),r},window.tildaForm.hideErrors=function(e){e.find(".js-errorbox-all").hide(),e.find(".js-rule-error").hide(),e.find(".js-error-rule-all").html(""),e.find(".js-successbox").hide(),e.find(".js-error-control-box .t-input-error").html(""),e.find(".js-error-control-box").removeClass("js-error-control-box"),e.removeClass("js-send-form-error"),e.removeClass("js-send-form-success")},window.tildaForm.showErrors=function(e,r){if(!r||0==r.length)return!1;var t=e.data("inputbox");t||(t=".blockinput");for(var a,o,i,s,n=window.tildaForm.arValidateErrors[window.tildaBrowserLang]||{},l=0;l<r.length;l++)if(r[l]&&r[l].obj){if(0==l&&"none"==r[l].obj){s=e.find(".js-rule-error-all"),s.html(n.emptyfill),s.css("display","block").show();break}for(a=r[l].obj.closest(t).addClass("js-error-control-box"),o=0,i=1,a.find(".t-input-error").length>0&&(o=1),j=0;j<r[l].type.length;j++)error=r[l].type[j],o&&(n[error+"field"]>""?a.find(".t-input-error").html(n[error+"field"]):n[error]>""&&a.find(".t-input-error").html(n[error])),1==i&&(s=e.find(".js-rule-error-"+error),s.length>0?(""==s.text()&&n[error]>""&&s.html(n[error]),s.css("display","block").show()):n[error]>""&&(s=e.find(".js-rule-error-all"),s&&s.length>0&&(s.html(n[error]),s.css("display","block").show())))}return e.find(".js-errorbox-all").css("display","block").show(),!0},window.tildaForm.send=function($jform,btnformsubmit,formtype,formskey){if(2==formtype||0==formtype&&formskey>""){var $elemCookie=$jform.find("input[name=tildaspec-cookie]");return $elemCookie&&0!=$elemCookie.length||($jform.append('<input type="hidden" name="tildaspec-cookie" value="">'),$elemCookie=$jform.find("input[name=tildaspec-cookie]")),$elemCookie.length>0&&$elemCookie.val(document.cookie),$elemCookie=$jform.find("input[name=tildaspec-referer]"),$elemCookie&&0!=$elemCookie.length||($jform.append('<input type="hidden" name="tildaspec-referer" value="">'),$elemCookie=$jform.find("input[name=tildaspec-referer]")),$elemCookie.length>0&&$elemCookie.val(window.location.href),$elemCookie=$jform.find("input[name=tildaspec-formid]"),$elemCookie&&0!=$elemCookie.length||($jform.append('<input type="hidden" name="tildaspec-formid" value="">'),$elemCookie=$jform.find("input[name=tildaspec-formid]")),$elemCookie.length>0&&$elemCookie.val($jform.attr("id")),formskey>""&&($elemCookie=$jform.find("input[name=tildaspec-formskey]"),$elemCookie&&0!=$elemCookie.length||($jform.append('<input type="hidden" name="tildaspec-formskey" value="">'),$elemCookie=$jform.find("input[name=tildaspec-formskey]")),$elemCookie.length>0&&$elemCookie.val(formskey)),$elemCookie=$jform.find("input[name=tildaspec-pageid]"),$elemCookie&&0!=$elemCookie.length||($jform.append('<input type="hidden" name="tildaspec-pageid" value="">'),$elemCookie=$jform.find("input[name=tildaspec-pageid]")),$elemCookie.length>0&&$elemCookie.val($("#allrecords").data("tilda-page-id")),$elemCookie=$jform.find("input[name=tildaspec-projectid]"),$elemCookie&&0!=$elemCookie.length||($jform.append('<input type="hidden" name="tildaspec-projectid" value="">'),$elemCookie=$jform.find("input[name=tildaspec-projectid]")),$elemCookie.length>0&&$elemCookie.val($("#allrecords").data("tilda-project-id")),$jform.find(".js-form-spec-comments").val(""),$formurl="https://forms.tildacdn.com/procces/",$.ajax({type:"POST",url:$formurl,data:$jform.serialize(),dataType:"json",success:function(json){var successurl=$jform.data("success-url"),successcallback=$jform.data("success-callback");if(btnformsubmit.removeClass("t-btn_sending"),btnformsubmit.data("form-sending-status","0"),btnformsubmit.data("submitform",""),json&&json.error){successurl="",successcallback="";var $errBox=$jform.find(".js-errorbox-all");$errBox&&0!=$errBox.length||($jform.prepend('<div class="js-errorbox-all"></div>'),$errBox=$jform.find(".js-errorbox-all"));var $allError=$errBox.find(".js-rule-error-all");$allError&&0!=$allError.length||($errBox.append('<p class="js-rule-error-all">'+json.error+"</p>"),$allError=$errBox.find(".js-rule-error-all")),$allError.html(json.error).show(),$errBox.show(),$jform.addClass("js-send-form-error")}else{if($jform.find(".js-successbox").length>0){if(""==$jform.find(".js-successbox").text()){var arMessage=window.tildaForm.arMessages[window.tildaBrowserLang]||{};arMessage.success&&$jform.find(".js-successbox").html(arMessage.success)}$jform.find(".js-successbox").show()}$jform.addClass("js-send-form-success");var virtPage="/tilda/"+$jform.attr("id")+"/submitted/",virtTitle="Send data from form "+$jform.attr("id");window.Tilda&&"function"==typeof Tilda.sendEventToStatistics?(Tilda.sendEventToStatistics(virtPage,virtTitle,"",0),window.dataLayer&&window.dataLayer.push({event:"submit_"+$jform.attr("id")})):("undefined"!=typeof ga&&ga&&"tilda"!=window.mainTracker&&ga("send",{hitType:"pageview",page:virtPage,title:virtTitle}),window.mainMetrika>""&&window[window.mainMetrika]&&window[window.mainMetrika].hit(virtPage,{title:virtTitle,referer:window.location.href}),window.dataLayer&&window.dataLayer.push({event:"submit_"+$jform.attr("id")}));var formres={};if(json&&json.results&&json.results[0]){var str=json.results[0];str=str.split(":"),formres.tranid=""+str[0]+":"+str[1],formres.orderid=str[2]?str[2]:"0"}else formres.tranid="0",formres.orderid="0";$jform.data("tildaformresult",formres),successcallback&&successcallback.length>0?eval(successcallback+"($jform)"):successurl&&successurl.length>0&&setTimeout(function(){window.location.href=successurl},500),$jform.find("input[type=text]:visible").val(""),$jform.find("textarea:visible").html(""),$jform.find("textarea:visible").val(""),$jform.data("tildaformresult",{tranid:"0",orderid:"0"})}},error:function(e){btnformsubmit.removeClass("t-btn_sending"),btnformsubmit.data("form-sending-status","0"),btnformsubmit.data("submitform","");var r=$jform.find(".js-errorbox-all");r&&0!=r.length||($jform.prepend('<div class="js-errorbox-all"></div>'),r=$jform.find(".js-errorbox-all"));var t=r.find(".js-rule-error-all");t&&0!=t.length||(r.append('<p class="js-rule-error-all"></p>'),t=r.find(".js-rule-error-all")),e&&e.responseText>""?t.html(e.responseText+". Please, try again later."):e&&e.statusText?t.html("Error ["+e.statusText+"]. Please, try again later."):t.html("Unknown error. Please, try again later."),t.show(),r.show(),$jform.addClass("js-send-form-error")},timeout:15e3}),!1}return"y"==$jform.data("is-formajax")?($.ajax({type:"POST",url:$jform.attr("action"),data:$jform.serialize(),dataType:"text",success:function(html){var json,successurl=$jform.data("success-url"),successcallback=$jform.data("success-callback");if(btnformsubmit.removeClass("t-btn_sending"),btnformsubmit.data("form-sending-status","0"),btnformsubmit.data("submitform",""),html&&html.length>0)if("{"==html.substring(0,1)){if(json=window.JSON&&window.JSON.parse?window.JSON.parse(html):$.parseJSON(html),json&&json.message)"OK"!=json.message&&$jform.find(".js-successbox").html(json.message);else if(json&&json.error){var $errBox=$jform.find(".js-errorbox-all");$errBox&&0!=$errBox.length||($jform.prepend('<div class="js-errorbox-all"></div>'),$errBox=$jform.find(".js-errorbox-all"));var $allError=$errBox.find(".js-rule-error-all");return $allError&&0!=$allError.length||($errBox.append('<p class="js-rule-error-all">Unknown error. Please, try again later.</p>'),$allError=$errBox.find(".js-rule-error-all")),$allError.html(json.error),$allError.show(),$errBox.show(),$jform.addClass("js-send-form-error"),!1}}else $jform.find(".js-successbox").html(html);if(""==$jform.find(".js-successbox").text()){var arMessage=window.tildaForm.arMessages[window.tildaBrowserLang]||{};arMessage.success&&$jform.find(".js-successbox").html(arMessage.success)}$jform.find(".js-successbox").show(),$jform.find("input[type=text]:visible").val(""),$jform.find("textarea:visible").html(""),$jform.find("textarea:visible").val(""),$jform.addClass("js-send-form-success");var virtPage="/tilda/"+$jform.attr("id")+"/submitted/",virtTitle="Send data from form "+$jform.attr("id");window.Tilda&&"function"==typeof Tilda.sendEventToStatistics?window.Tilda.sendEventToStatistics(virtPage,virtTitle,"",0):("undefined"!=typeof ga&&"tilda"!=window.mainTracker&&ga("send",{hitType:"pageview",page:virtPage,title:virtTitle}),window.mainMetrika>""&&window[window.mainMetrika]&&window[window.mainMetrika].hit(virtPage,{title:virtTitle,referer:window.location.href})),successcallback&&successcallback.length>0?eval(successcallback+"($jform)"):successurl&&successurl.length>0&&setTimeout(function(){window.location.href=successurl},500)},error:function(e){btnformsubmit.removeClass("t-btn_sending"),btnformsubmit.data("form-sending-status","0"),btnformsubmit.data("submitform","");var r=$jform.find(".js-errorbox-all");r&&0!=r.length||($jform.prepend('<div class="js-errorbox-all"></div>'),r=$jform.find(".js-errorbox-all"));var t=r.find(".js-rule-error-all");t&&0!=t.length||(r.append('<p class="js-rule-error-all"></p>'),t=r.find(".js-rule-error-all")),e&&e.responseText>""?t.html(e.responseText+". Please, try again later."):e&&e.statusText?t.html("Error ["+e.statusText+"]. Please, try again later."):t.html("Unknown error. Please, try again later."),t.show(),r.show(),$jform.addClass("js-send-form-error")},timeout:15e3}),event.preventDefault(),!1):(btnformsubmit.data("form-sending-status","3"),$jform.submit(),!0)},$(".js-tilda-captcha").each(function(){if($(this).attr("data-tilda-captchakey")>""){window.tildaForm.isRecaptchaScriptInit===!1&&(window.tildaForm.isRecaptchaScriptInit=!0,$("head").append('<script src="https://www.google.com/recaptcha/api.js?render=explicit" async defer></script>'),$("head").append('<style type="text/css">.js-send-form-success .grecaptcha-badge {display: none;}</style>'));var e=$(this).attr("id");0==$("#"+e+"recaptcha").length&&$(this).append('<div id="'+e+'recaptcha" class="g-recaptcha" data-sitekey="'+$(this).attr("data-tilda-captchakey")+'" data-callback="window.tildaForm.captchaCallback" data-size="invisible"></div>')}else $(this).removeClass("js-tilda-captcha")}),$(".js-tilda-mask").each(function(){var e=$(this).data("tilda-mask"),r=$(this).data("tilda-mask-holder");e&&(r>""?$(this).mask(e,{placeholder:r}):$(this).mask(e))}),$(".js-tilda-rule").focus(function(){var e=$(this).attr("placeholder");e>""&&($(this).data("placeholder",e),$(this).attr("placeholder",""))}),$(".js-tilda-rule").blur(function(){var e=$(this).data("placeholder");e>""&&($(this).attr("placeholder",e),$(this).data("placeholder",""))}),window.validateForm=function(e){return window.tildaForm.validate(e)};var $jallforms=$(".r").find(".js-form-proccess[data-formactiontype]");$jallforms.length>0&&$jallforms.each(function(){1!=$(this).data("formactiontype")&&$(this).append('<div style="position: absolute; left: -5000px;"><input type="text" name="form-spec-comments" value="Its good" class="js-form-spec-comments"  tabindex="-1" /></div>')}),$(".r").off("submit",".js-form-proccess"),$(".r").on("submit",".js-form-proccess",function(){var e=$(this).find("[type=submit]"),r=e.data("form-sending-status");return r&&3==r?(e.data("form-sending-status"),!0):($(this).find("[type=submit]").trigger("click"),!1)}),$(".r").off("dblclick",".js-form-proccess [type=submit]"),$(".r").off("click",".js-form-proccess [type=submit]"),$(".r").on("click",".js-form-proccess [type=submit]",function(e){e.preventDefault();var r=$(this),t=r.data("form-sending-status");if(t>="1")return!1;var a=$(this).closest("form"),o=!1;if(0==a.length)return!1;if(r.addClass("t-btn_sending"),r.data("form-sending-status","1"),r.data("submitform",a),window.tildaForm.hideErrors(a),o=window.tildaForm.validate(a),window.tildaForm.showErrors(a,o))return r.removeClass("t-btn_sending"),r.data("form-sending-status","0"),r.data("submitform",""),!1;var i=a.data("formactiontype"),s=$("#allrecords").data("tilda-formskey");if(0==a.find(".js-formaction-services").length&&1!=i&&""==s){var n=a.find(".js-errorbox-all");n&&0!=n.length||(a.prepend('<div class="js-errorbox-all"></div>'),n=a.find(".js-errorbox-all"));var l=n.find(".js-rule-error-all");return l&&0!=l.length||(n.append('<p class="js-rule-error-all">'+json.error+"</p>"),l=n.find(".js-rule-error-all")),l.html("Please set reciever in block with forms").show(),n.show(),a.addClass("js-send-form-error"),r.removeClass("t-btn_sending"),r.data("form-sending-status","0"),r.data("submitform",""),!1}if(a.find(".g-recaptcha").length>0&&grecaptcha){window.tildaForm.currentFormProccessing={form:a,btn:r,formtype:i,formskey:s};var d=a.data("tilda-captcha-clientid");if(void 0===d||""===d){var c={size:"invisible",sitekey:a.data("tilda-captchakey"),callback:window.tildaForm.captchaCallback};d=grecaptcha.render(a.attr("id")+"recaptcha",c),a.data("tilda-captcha-clientid",d)}else grecaptcha.reset(d);return grecaptcha.execute(d),!1}return window.tildaForm.send(a,r,i,s),!1});try{var TILDAPAGE_URL=window.location.href,TILDAPAGE_QUERY="",TILDAPAGE_UTM="";if(-1!==TILDAPAGE_URL.toLowerCase().indexOf("utm_")&&(TILDAPAGE_URL=TILDAPAGE_URL.toLowerCase(),TILDAPAGE_QUERY=TILDAPAGE_URL.split("?"),TILDAPAGE_QUERY=TILDAPAGE_QUERY[1],"string"==typeof TILDAPAGE_QUERY)){var arPair,i,arParams=TILDAPAGE_QUERY.split("&");for(i in arParams)arPair=arParams[i].split("="),"utm_"==arPair[0].substring(0,4)&&(TILDAPAGE_UTM=TILDAPAGE_UTM+arParams[i]+"|||");if(TILDAPAGE_UTM.length>0){var date=new Date;date.setDate(date.getDate()+30),document.cookie="TILDAUTM="+encodeURIComponent(TILDAPAGE_UTM)+"; path=/; expires="+date.toUTCString()}}}catch(err){}})}(jQuery),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var r,t=navigator.userAgent,a=/iphone/i.test(t),o=/chrome/i.test(t),i=/android/i.test(t);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,r){var t;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof e?(r="number"==typeof r?r:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,r):this.createTextRange&&(t=this.createTextRange(),t.collapse(!0),t.moveEnd("character",r),t.moveStart("character",e),t.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,r=this[0].selectionEnd):document.selection&&document.selection.createRange&&(t=document.selection.createRange(),e=0-t.duplicate().moveStart("character",-1e5),r=e+t.text.length),{begin:e,end:r})},unmask:function(){return this.trigger("unmask")},mask:function(t,s){var n,l,d,c,m,f,u,p;if(!t&&this.length>0){n=e(this[0]);var h=n.data(e.mask.dataName);return h?h():void 0}return s=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},s),l=e.mask.definitions,d=[],c=u=t.length,m=null,e.each(t.split(""),function(e,r){"?"==r?(u--,c=e):l[r]?(d.push(new RegExp(l[r])),null===m&&(m=d.length-1),c>e&&(f=d.length-1)):d.push(null)}),this.trigger("unmask").each(function(){function n(){if(s.completed){for(var e=m;f>=e;e++)if(d[e]&&E[e]===h(e))return;s.completed.call(P)}}function h(e){return s.placeholder.charAt(e<s.placeholder.length?e:0)}function g(e){for(;++e<u&&!d[e];);return e}function $(e){for(;--e>=0&&!d[e];);return e}function j(e,r){var t,a;if(!(0>e)){for(t=e,a=g(r);u>t;t++)if(d[t]){if(!(u>a&&d[t].test(E[a])))break;E[t]=E[a],E[a]=h(a),a=g(a)}C(),P.caret(Math.max(m,e))}}function b(e){var r,t,a,o;for(r=e,t=h(e);u>r;r++)if(d[r]){if(a=g(r),o=E[r],E[r]=t,!(u>a&&d[a].test(o)))break;t=o}}function w(){var e=P.val(),r=P.caret();if(p&&p.length&&p.length>e.length){for(T(!0);r.begin>0&&!d[r.begin-1];)r.begin--;if(0===r.begin)for(;r.begin<m&&!d[r.begin];)r.begin++;P.caret(r.begin,r.begin)}else{for(T(!0);r.begin<u&&!d[r.begin];)r.begin++;P.caret(r.begin,r.begin)}n()}function v(){T(),P.val()!=L&&P.change()}function k(e){if(!P.prop("readonly")){var r,t,o,i=e.which||e.keyCode;p=P.val(),8===i||46===i||a&&127===i?(r=P.caret(),t=r.begin,o=r.end,o-t===0&&(t=46!==i?$(t):o=g(t-1),o=46===i?g(o):o),x(t,o),j(t,o-1),e.preventDefault()):13===i?v.call(this,e):27===i&&(P.val(L),P.caret(0,T()),e.preventDefault())}}function y(r){if(!P.prop("readonly")){var t,a,o,s=r.which||r.keyCode,l=P.caret();if(!(r.ctrlKey||r.altKey||r.metaKey||32>s)&&s&&13!==s){if(l.end-l.begin!==0&&(x(l.begin,l.end),j(l.begin,l.end-1)),t=g(l.begin-1),u>t&&(a=String.fromCharCode(s),d[t].test(a))){if(b(t),E[t]=a,C(),o=g(t),i){var c=function(){e.proxy(e.fn.caret,P,o)()};setTimeout(c,0)}else P.caret(o);l.begin<=f&&n()}r.preventDefault()}}}function x(e,r){var t;for(t=e;r>t&&u>t;t++)d[t]&&(E[t]=h(t))}function C(){P.val(E.join(""))}function T(e){var r,t,a,o=P.val(),i=-1;for(r=0,a=0;u>r;r++)if(d[r]){for(E[r]=h(r);a++<o.length;)if(t=o.charAt(a-1),d[r].test(t)){E[r]=t,i=r;break}if(a>o.length){x(r+1,u);break}}else E[r]===o.charAt(a)&&a++,c>r&&(i=r);return e?C():c>i+1?s.autoclear||E.join("")===A?(P.val()&&P.val(""),x(0,u)):C():(C(),P.val(P.val().substring(0,i+1))),c?r:m}var P=e(this),E=e.map(t.split(""),function(e,r){return"?"!=e?l[e]?h(r):e:void 0}),A=E.join(""),L=P.val();P.data(e.mask.dataName,function(){return e.map(E,function(e,r){return d[r]&&e!=h(r)?e:null}).join("")}),P.one("unmask",function(){P.off(".mask").removeData(e.mask.dataName)}).on("focus.mask",function(){if(!P.prop("readonly")){clearTimeout(r);var e;L=P.val(),e=T(),r=setTimeout(function(){P.get(0)===document.activeElement&&(C(),e==t.replace("?","").length?P.caret(0,e):P.caret(e))},10)}}).on("blur.mask",v).on("keydown.mask",k).on("keypress.mask",y).on("input.mask paste.mask",function(){P.prop("readonly")||setTimeout(function(){var e=T(!0);P.caret(e),n()},0)}),o&&i&&P.off("input.mask").on("input.mask",w),T()})}})});